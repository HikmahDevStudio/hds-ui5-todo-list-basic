sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/StandardListItem","sap/ui/model/json/JSONModel"],(e,t,s,i,a)=>{"use strict";return e.extend("hds.ui5.todolistBasic.controller.MainView",{onInit(){console.log("MainView controller initialized");this.bindFilteredList()},bindFilteredList(){this.byId("taskList_pending").bindItems({path:"/tasks",filters:[new t("isCompleted",s.EQ,false)],template:new i({title:"{title}"})});this.byId("taskList_completed").bindItems({path:"/tasks",filters:[new t("isCompleted",s.EQ,true)],template:new i({title:"{title}",highlight:"Success"})})},submitTaskHandler(){this.addTaskHandler()},addTaskHandler(){const e=this.byId("inputTask");const t=e.getValue().trim();e.setValue("");if(!t.trim())return;const s=this.getView().getModel().getProperty("/tasks");s.push({id:Date.now().toString(),title:t,isCompleted:false});this.getView().getModel().setProperty("/tasks",s);this.updatePendingTaskPanelVisibility();this.updateCompletedTaskPanelVisibility()},updatePendingTaskPanelVisibility(){const e=this.byId("panel__pendingTasks");const t=this.getView().getModel().getProperty("/tasks")?.filter(e=>!e.isCompleted).length;e.setExpanded(t>0);e.setHeight(t>10?"350px":"auto");e.setHeaderText(`Pending tasks (${t})`)},updateCompletedTaskPanelVisibility(){const e=this.byId("panel__completedTasks");const t=this.byId("taskList_completed");const s=this.getView().getModel().getProperty("/tasks")?.filter(e=>e.isCompleted).length;e.setHeight(s>10?"350px":"auto");e.setHeaderText(s>0?`Completed tasks (${s})`:"Completed tasks");t.addStyleClass(s>0?"completedTaskText":"")},selectTaskHandler(e){const t=e?.getSource()?.getSelectedItem()?.getBindingContext()?.getObject();if(t)this.byId("deleteTaskBtn").setEnabled(true);if(t&&!t.isCompleted)this.byId("completeTaskBtn").setEnabled(true);if(t){this.enabledCancelButton()}else this.disableCancelButton();if(t&&!t.isCompleted){this.enabledMarkCompleteButton()}else this.disableMarkCompleteButton()},enabledCancelButton(){this.byId("deleteTaskBtn").setEnabled(true)},enabledMarkCompleteButton(){this.byId("completeTaskBtn").setEnabled(true)},disableCancelButton(){this.byId("deleteTaskBtn").setEnabled(false)},disableMarkCompleteButton(){this.byId("completeTaskBtn").setEnabled(false)},markCompleteTaskHandler(){const e=this.byId("taskList_pending");const t=this.getView().getModel();const s=e?.getSelectedItem()?.getBindingContext()?.getObject();if(!s?.id)return;const i=this.getView().getModel().getProperty("/tasks");const a=i.map(e=>{if(e.id===s.id){return{...e,isCompleted:true}}else return e});this.getView().getModel().setProperty("/tasks",a);this.disableCancelButton();this.disableMarkCompleteButton();this.updatePendingTaskPanelVisibility();this.updateCompletedTaskPanelVisibility()},deleteTaskHandler(){const e=this.byId("taskList_pending")?.getSelectedItem()?.getBindingContext()?.getObject()?.id;if(!e)return;const t=this.getView().getModel().getProperty("/tasks");const s=t.filter(t=>t.id!==e);this.getView().getModel().setProperty("/tasks",s);this.byId("taskList_pending").removeSelections(true);this.disableCancelButton();this.disableMarkCompleteButton();this.updatePendingTaskPanelVisibility();this.updateCompletedTaskPanelVisibility()},expandPendingPanelHandler(e){const t=e.getParameter("expand");const s=this.byId("panel__pendingTasks");if(!t){s.setHeight("auto")}}})});
//# sourceMappingURL=MainView.controller.js.map